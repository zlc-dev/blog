---
import { ClientRouter } from 'astro:transitions';
import APlayerGlobal from '../components/APlayerGlobal.astro';
---

<ClientRouter />
<head>
    <script is:inline>
        (function() {
            var theme = localStorage.getItem("theme");
            if (!theme) {
                theme = matchMedia("(prefers-color-scheme: dark)").matches
                    ? "dark"
                    : "light"
            }
            document.documentElement.dataset.theme = theme;
            localStorage.setItem("theme", theme);
        }())
    </script>
</head>
<body>
    <APlayerGlobal />
    <slot />
</body>

<script>
import { firstSetTheme } from "../theme";
document.addEventListener("astro:page-load", firstSetTheme);
</script>
